'use strict';$(document).ready(function(){$('.joinEventBtn').click(function(a){var b=$(a.target).children('input').val();console.log(b);var c=$('#input_csrf').val();$.ajax({type:'POST',url:'/join',data:{_csrf:c,eventAliasId:b},timeout:3e3,success:function success(d){'400'==d.status?swal({title:d.msg,text:d.text,type:'warning',confirmButtonColor:'#DD6B55',confirmButtonText:'Okay',closeOnConfirm:!0}):swal({title:d.msg,text:d.text,type:'success',confirmButtonColor:'#DD6B55',confirmButtonText:'Okay',closeOnConfirm:!1},function(){window.location.href=d.redirect})},error:function error(d){console.log(d)}})}),$('#showAllEventsBtn').click(function(){infoWindow.close(),$('.ac-event-panel').removeClass('highlight'),$('.ac-event-panel').show(),$('html,body').animate({scrollTop:$('#showAllEventsBtn').offset().top},'slow')})});var markers=[],map,infoWindow,service;function loadMap(){var a=$('#input_events').val();a=JSON.parse(a),map=new google.maps.Map(document.getElementById('map'),{center:{lat:49.278628,lng:-122.920355},zoom:12,scaleControl:!0,mapTypeId:'roadmap'}),infoWindow=new google.maps.InfoWindow,service=new google.maps.places.PlacesService(map);var b=document.getElementById('pac-input'),c=new google.maps.places.SearchBox(b);map.controls[google.maps.ControlPosition.TOP].push(b),map.addListener('bounds_changed',function(){c.setBounds(map.getBounds())}),c.addListener('places_changed',function(){var s=c.getPlaces();if(0!=s.length){var t=new google.maps.LatLngBounds;s.forEach(function(u){return u.geometry?void(u.geometry.viewport?t.union(u.geometry.viewport):t.extend(u.geometry.location)):void console.log('Returned place contains no geometry')}),map.fitBounds(t)}});for(var d=void 0,f=0;f<a.length;f++){var g=a[f].locationName,h=a[f].locationAddress,k=a[f].locationCoordinates[1],l=a[f].locationCoordinates[0],m=a[f].sport,n=a[f].teamupName,o=a[f].from.split('T')[0]+' '+a[f].from.split('T')[1].split('.')[0];var p='None Set';a[f].to&&(p=a[f].to.split('T')[0]+' '+a[f].to.split('T')[1].split('.')[0]);for(var r=f-1;0<=r;r--)a[r].locationCoordinates[1]==k&&a[r].locationCoordinates[0]==l&&(k+=(Math.random()-1)/1500,l+=(Math.random()-.5)/1500);d=new google.maps.Marker({position:new google.maps.LatLng(k,l),map:map,title:g,animation:google.maps.Animation.DROP}),d.category=m,d.setVisible(!0),function(s,t,u,v,w,x){google.maps.event.addListener(s,'click',function(){w.setContent(v),w.open(map,s),$('.ac-event-panel').removeClass('highlight'),$('.ac-event-panel').hide(),$('#mixin'+x).show(),$('#mixin'+x).addClass('highlight')})}(d,g,h,q,infoWindow,f),markers.push(d)}navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(s){var t={lat:s.coords.latitude,lng:s.coords.longitude},v=new google.maps.Marker({position:t,map:map,icon:'http://i.stack.imgur.com/orZ4x.png'});infoWindow.setPosition(t),infoWindow.setContent('You are here.'),infoWindow.open(map),setTimeout(function(){infoWindow.close()},'3000'),map.setCenter(t)})}
